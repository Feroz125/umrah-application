server:
  port: 8080

spring:
  application:
    name: gateway
  cloud:
    gateway:
      globalcors:
        add-to-simple-url-handler-mapping: true
        corsConfigurations:
          '[/**]':
            # Comma-separated list is supported via CORS_ALLOWED_ORIGINS env.
            # Example:
            # CORS_ALLOWED_ORIGINS=https://al-muhammadtravels.com,https://www.al-muhammadtravels.com,https://umrah-application-pqz2xap6l-feroz125s-projects.vercel.app,http://localhost:5173
            allowedOriginPatterns: ${CORS_ALLOWED_ORIGINS:http://localhost:5173}
            allowedMethods:
              - GET
              - POST
              - PUT
              - PATCH
              - DELETE
              - OPTIONS
            allowedHeaders:
              - Authorization
              - Content-Type
              - X-Tenant-ID
              - X-Requested-With
              - Accept
              - Origin
            exposedHeaders:
              - Authorization
            allowCredentials: true
            maxAge: 3600
      routes:
        - id: auth
          uri: ${AUTH_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/auth/**
          filters:
            - StripPrefix=1
        - id: catalog
          uri: ${CATALOG_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/catalog/**
          filters:
            - StripPrefix=1
        - id: booking
          uri: ${BOOKING_SERVICE_URL:http://localhost:8083}
          predicates:
            - Path=/api/booking/**
          filters:
            - StripPrefix=1
        - id: payment
          uri: ${PAYMENT_SERVICE_URL:http://localhost:8084}
          predicates:
            - Path=/api/payment/**
          filters:
            - StripPrefix=1
        - id: admin-catalog
          uri: ${CATALOG_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/admin/catalog/**
          filters:
            - StripPrefix=1
        - id: admin-booking
          uri: ${BOOKING_SERVICE_URL:http://localhost:8083}
          predicates:
            - Path=/api/admin/booking/**
          filters:
            - StripPrefix=1
        - id: admin-payment
          uri: ${PAYMENT_SERVICE_URL:http://localhost:8084}
          predicates:
            - Path=/api/admin/payment/**
          filters:
            - StripPrefix=1

security:
  jwt:
    secret: ${JWT_SECRET:change-me-please-change-me-please-123456}
